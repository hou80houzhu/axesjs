/*!
 * @packet opensite.mobi.util.media;
 */var audio=function(t){this.option=t;var o=new Audio,e=this;for(var n in t)/^on/.test(n)&&t[n]&&o.addEventListener(n.substring(2,n.length),function(t){var o=e.option["on"+t.type];o&&("progress"===t.type&&(t.percent=e.getLoadedPercent()),"timeupdate"===t.type&&(t.percent=e.getPlayedPercent()),o.call(e,t))});this.audio=o};audio.prototype.src=function(t){return 1===arguments.length?(this.audio.src=t,this):this.audio.src},audio.prototype.preload=function(t){return 1===arguments.length?(this.audio.preload=t,this):this.audio.preload},audio.prototype.seeking=function(){return this.audio.seeking},audio.prototype.readyState=function(){return this.audio.readyState()},audio.prototype.toggle=function(){return this.audio.paused?this.audio.play():this.audio.pause(),this},audio.prototype.load=function(){return this.audio.load(),this},audio.prototype.play=function(){return this.audio.play(),this},audio.prototype.pause=function(){return this.audio.pause(),this},audio.prototype.volume=function(t){return 1===arguments.length?(this.audio.volume=t,this):this.audio.volume},audio.prototype.mute=function(t){return 1===arguments.length?(this.audio.muted=t,this):this.audio.muted},audio.prototype.isEnd=function(){return this.audio.ended},audio.prototype.loop=function(t){return 1===arguments.length?(this.audio.loop=t,this):this.audio.loop},audio.prototype.defaultPlayRate=function(){return this.audio.defaultPlaybackRate},audio.prototype.playRate=function(t){return 1===arguments.length?(this.audio.playbackRate=t,this):this.audio.playbackRate},audio.prototype.autoPlay=function(t){return 1===arguments.length?(this.audio.autoPlay=t,this):this.audio.autoPlay},audio.prototype.currentTime=function(t){return 1===arguments.length&&"number"==typeof t?(this.audio.currentTime=t,this):1===arguments.length?audio.formatTime(this.audio.currentTime,t):this.audio.currentTime},audio.prototype.startTime=function(t){return 1===arguments.length?audio.formatTime(this.audio.currentTime,t):this.audio.currentTime},audio.prototype.error=function(){return this.audio.error},audio.prototype.canPlayType=function(t){return this.audio.canPlayType(t)},audio.prototype.getLoadedPercent=function(){try{return Math.round(this.audio.buffered.end(this.audio.buffered.length-1)/this.audio.duration*100)}catch(t){return 0}},audio.prototype.getPlayedPercent=function(){try{return Math.round(this.audio.currentTime/this.audio.duration*100)}catch(t){return 0}},audio.prototype.getAudio=function(){return this.audio},audio.formatTime=function(t,o){o||(o="hh:mm:ss");var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),u=Math.round(t-3600*e-60*n);return o=o.replace(/h*/,function(t,o,n){if(""!==t){if(e+="",t.length<=e.length)return e;for(var u="",i=0;i<t.length-e.length;i++)u+="0";return u+=e}return""}).replace(/m+/,function(t,o,e){if(""!==t){if(n+="",t.length<=n.length)return n;for(var u="",i=0;i<t.length-n.length;i++)u+="0";return u+=n}return""}),o=o.replace(/s+/g,function(t,o,e){if(""!==t){if(u+="",t.length<=u.length)return u;for(var n="",i=0;i<t.length-u.length;i++)n+="0";return n+=u}return""})},audio.prototype.getTotalTime=function(t){return 1===arguments.length?audio.formatTime(this.audio.duration,t):this.audio.duration};var videowapper=function(t){var o={src:""};this.option=$.extend(o,t),this.video=new video};module.exports={audio:function(t){var o={onloadstart:null,onprogress:null,onplay:null,onpause:null,onended:null,ontimeupdate:null,oncanplaythrough:null,oncanplay:null,onsuspend:null,onabort:null,onerror:null,onstalled:null,onloadedmetadata:null,onwaiting:null,onplaying:null,onseeking:null};return $.extend(o,t),new audio(o)},video:function(){}};